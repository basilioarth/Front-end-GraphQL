# Resumo da Aula – Página de Ideias + Modal de Criação + Rotas Protegidas

## 1. Rotas públicas x protegidas
- Criados dois wrappers:
  - `PublicRoute`: permite acesso mesmo se estiver logado (login/signup)
  - `ProtectedRoute`: só acessa se estiver autenticado
- Rotas atuais no `App.tsx`:
  ```tsx
  <Route path="/login" element={<PublicRoute><Login /></PublicRoute>} />
  <Route path="/signup" element={<PublicRoute><Signup /></PublicRoute>} />
  <Route path="/" element={<ProtectedRoute><IdeasPage /></ProtectedRoute>} />
  ```

## 2. Header (cabeçalho pós-login)
- Criado `components/Header.tsx`
- Exibe:
  - Logo à esquerda (logo-icon.svg)
  - Espaço central (futuro menu)
  - Área direita para avatar/nome do usuário (ainda vazio)
- Só é exibido quando `isAuthenticated === true`

## 3. Componentes de layout criados
- `components/Page.tsx`: container centralizado com padding e largura máxima
- `components/Header.tsx`: barra superior fixa
- Layout atualizado para mostrar Header apenas quando logado

## 4. AuthLink (envio automático do token)
- Implementado no `src/lib/apollo.ts`:
```ts
const authLink = setContext((_, { headers }) => {
  const token = useAuthStore.getState().token;
  return {
    headers: {
      ...headers,
      authorization: token ? `Bearer ${token}` : "",
    }
  };
});
```
- Adicionado no chain do Apollo Client → todas as requisições agora levam o Bearer token automaticamente

## 5. Reestruturação de pastas (organização final)
```
src/
├── pages/
│   ├── auth/
│   │   ├── Login.tsx
│   │   └── Signup.tsx
│   └── ideas/
│       ├── index.tsx          → IdeasPage (página principal)
│       └── components/
│           └── CreateIdeaDialog.tsx
├── components/
│   ├── Header.tsx
│   ├── Page.tsx
│   └── ui/                    → shadcn components
```

## 6. Página de Ideias (`pages/ideas/index.tsx`)
- Título grande “Ideias” (text-3xl, purple-600)
- Botão “Nova ideia” com ícone Plus (lucide-react)
- Área preparada para listagem de cards (ainda vazia)

## 7. Modal de criação de ideia totalmente montada
- Instalado componente Dialog do shadcn:
  ```bash
  npx shadcn-ui@latest add dialog
  ```
- Criado `CreateIdeaDialog.tsx` com:
  - Título: “Compartilhe sua ideia”
  - Descrição: “Adicione uma nova ideia para seu time”
  - Input controlado: título
  - Textarea controlado: descrição (6 linhas)
  - Botões: “Cancelar” (outline) e “Salvar” (primary, type=submit)
  - Controle de estado local com `useState` (open, title, description)
  - Botão “Nova ideia” abre a modal corretamente

## 8. Estado atual do projeto
- Autenticação 100% funcional (login + cadastro)
- Token enviado automaticamente em todas as requisições
- Rotas protegidas funcionando
- Header aparece só após login
- Redirecionamento após login/cadastro ainda não implementado (será na próxima aula)
- Modal de criação pronta visualmente e estruturada

## Próximos passos (próxima aula)
- Criar mutation `createIdea`
- Integrar o formulário da modal com a mutation
- Fazer refetch ou cache update após criar ideia
- Implementar listagem de ideias com query
- Redirecionamento automático após login/cadastro
- Implementar logout

Tudo pronto visualmente e estruturalmente!  
Só falta conectar a modal com o back-end e listar as ideias. Bora pra mutation de criação!