# Resumo da Aula – Cadastro e Login 100% Funcionais + Redirecionamento Pendente

## 1. Cadastro (Signup) totalmente funcional
- Conectado o formulário de `pages/Signup.tsx` ao método `signup` do Zustand store
- Estado de `loading` local controlado com `useState<boolean>`
- Ao submeter:
  ```ts
  const registered = await signup({ name, email, password })
  ```
- Em caso de sucesso → Toast “Cadastro realizado com sucesso”
- Em caso de erro → Toast “Erro ao realizar o cadastro”
- Botão “Cadastrar” desabilitado durante loading
- Testado ao vivo: cadastro feito com sucesso, mutation `register` executada, token e usuário salvos no Zustand + localStorage (persist)

## 2. Mutation de Login criada (`src/graphql/mutations/login.ts`)
```graphql
mutation Login($data: LoginInput!) {
  login(data: $data) {
    token
    refreshToken
    user {
      id
      name
      email
      role
      createdAt
      updatedAt
    }
  }
}
```

## 3. Método `login` adicionado ao Zustand store (`src/stores/auth.ts`)
- Estrutura idêntica ao `signup`
- Recebe `email` e `password`
- Executa `client.mutate` com a mutation `login`
- Em sucesso → salva `user`, `token`, seta `isAuthenticated: true`
- Retorna `true`/`false` para controle no componente

## 4. Login totalmente funcional (`pages/Login.tsx`)
- Importado `const login = useAuthStore(state => state.login)`
- Estado `loading` controlado localmente
- `handleSubmit` com `e.preventDefault()`
- Execução:
  ```ts
  const loggedIn = await login(email, password)
  ```
- Toast de sucesso: “Login realizado com sucesso”
- Toast de erro: “Falha ao realizar o login”
- Botão “Entrar” desabilitado durante loading
- Testado ao vivo: login funcionando perfeitamente

## 5. Estado global de autenticação (Zustand + persist)
- `user`, `token` e `isAuthenticated` agora são salvos automaticamente no localStorage
- Após cadastro ou login, o usuário já fica autenticado na aplicação inteira

## 6. O que já está 100% concluído
- Apollo Client configurado e funcionando
- Mutations `register` e `login` declaradas e tipadas
- Store de autenticação completo (signup + login)
- Telas de Login e Cadastro totalmente integradas com back-end
- Feedback visual com Sonner Toast
- Loading states nos botões

## Próximos passos (próxima aula)
- Criar a página de Ideias (`/ideas` ou `/`)
- Configurar rotas protegidas (redirecionar usuário autenticado automaticamente)
- Redirecionar após cadastro/login para a página principal
- Implementar logout
- Começar a consumir queries de ideias, votos e comentários

Autenticação completa e funcionando!  
Agora é só criar a home e proteger as rotas. Bora pra próxima!